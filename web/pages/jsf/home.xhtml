<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
<h:head>
    <title><h:outputFormat value="#{msgs['home.title']}"/></title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
          rel="stylesheet"/>
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.css"/>
    <link rel="stylesheet" href="/gestion_contact/pages/jsf/main.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
</h:head>

<h:body style="background-color: #f7f7f7;">

    <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"/>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.js"/>
    <script type="text/javascript" src="/gestion_contact/pages/jsf/main.js"/>

    <!-- Load contacts on first launch -->
    <f:metadata>
        <f:viewAction action="#{beanManager.loadContacts}"/>
        <f:viewAction action="#{beanManager.loadGroups}"/>
        <f:view locale="#{facesContext.externalContext.requestLocale}"/>
    </f:metadata>

    <!-- navigation bar -->
    <ui:insert name="navbar">
        <ui:include src="template/navbar.xhtml"/>
    </ui:insert>

    <div class="container">

        <br/>
        <!-- Menu buttons -->
        <div class="row">
            <div class="col s2 offset-s10">
                <ui:insert name="menu">
                    <ui:include src="template/menu.xhtml"/>
                </ui:insert>
            </div>
        </div>

        <!-- Put error message in a notification box -->
        <c:if test="#{not empty beanManager.errors }">
            <c:forEach var="error" items="#{beanManager.errors}">
                <div class="card-panel" style="width: 50%">
                    <i style="vertical-align: middle;" class="material-icons red-text left">warning</i>
                    #{error}
                </div>
            </c:forEach>
        </c:if>

        <br/><br/><br/>
        <!-- Main page display -->
        <div class="row">
            <div class="col s6">
                <!-- Dislay list of contacts or groups (depending of viewManager state)-->
                <ui:insert name="list-contact-or-group-view">
                    <ui:include src="template/main_listview.xhtml"/>
                </ui:insert>
            </div>

            <div class="col s6">

                <!-- Display contact informations -->
                <ui:insert name="contact-view">
                    <ui:include src="template/contact_view.xhtml"/>
                </ui:insert>

                <!-- Display group information (name and list of contacts -->
                <ui:insert name="group-view">
                    <ui:include src="template/group_view.xhtml"/>
                </ui:insert>

                <!-- Update contact informations -->
                <ui:insert name="update-contact-view">
                    <ui:include src="template/update_contact_view.xhtml"/>
                </ui:insert>

                <!-- Create contact -->
                <ui:insert name="create-contact-view">
                    <ui:include src="template/create_contact_view.xhtml"/>
                </ui:insert>

                <!-- Update group information-->
                <ui:insert name="update-group-view">
                    <ui:include src="template/update_group_view.xhtml"/>
                </ui:insert>

                <!-- Create new group -->
                <ui:insert name="create-group-view">
                    <ui:include src="template/create_group_view.xhtml"/>
                </ui:insert>
            </div>

        </div>

    </div>

    <br/><br/><br/><br/><br/><br/><br/><br/><br/>

    <!-- footer -->
    <ui:insert name="footer">
        <ui:include src="template/footer.xhtml"/>
    </ui:insert>

</h:body>

</html>
